<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace='memberMapper'>

	<select id="login" resultMap='memberResult'>
		select *
		from member
		where MEM_ID = #{memId} and MEM_ACTIVE = 'Y'
	</select>
	
	<resultMap type="Member" id="memberResult">
		<id column="MEM_NO" property="memNo"/>
		<result column="MEM_ID" property="memId"/>
		<result column="MEM_PWD" property="memPwd"/>
		<result column="MEM_NAME" property="memName"/>
		<result column="MEM_EMAIL" property="memEmail"/>
		<result column="MEM_PHONE" property="memPhone"/>
		<result column="ENROLL_DATE" property="enrollDate"/>
		<result column="UPDATE_DATE" property="updateDate"/>
		<result column="MEM_ACTIVE" property="memActive"/>
		<result column="MEM_GRADE" property="memGrade"/>
		<result column="MEM_INTRO" property="memIntro"/>
	</resultMap>
	
	<insert id='signUp'>
		insert into member
			values(seq_mem.nextval, #{memName}, #{memId}, #{memPwd}, #{memEmail}, #{memPhone}, sysdate, sysdate, default, default, #{memIntro})
	</insert>
	
	<select id="checkId" resultType='_int'>
		select count(*)
			from member
			where mem_id = #{memId}
	</select>

	<update id="updatePwd">
		update member
		 set mem_pwd = #{newPwd}
		 where mem_id = #{id}
	</update>
	
	<select id="selectBoard" resultMap="selBoard">
		select *
		from board
			join member using(board_writer_name = mem_name)
		where board_active = 'Y' and cate_no = #{i}
		order by create_date desc
	</select>
	
	
	<resultMap type="Board" id="selBoard">
		<result column="CREATE_DATE" property="boardCreateDate"/>
	</resultMap>
	
	<select id="getListCount" resultType="_int">
		select count(*)
		from board
		where board_active='Y' and board_writer_no = #{memNo}
	</select>
	
	<select id="myBoardList" resultMap="selBoard">
		select cate_no, board_title, board_writer_name, create_date
		from board
		where board_active='Y' and board_writer_no = #{memNo}
	</select>
	
	<select id="getListCommentCount" resultType="_int">
		select count(*)
		from reply
		where mem_no = #{memNo}
	</select>
	
	<select id="myCommentList" resultMap="selMyComment">
		select *
		from reply
		where mem_no = #{memNo}
	</select>
	
	<resultMap type="Reply" id="selMyComment">
		<result column="RE_CONTENT" property="reContent"/>
		<result column="MEM_NO" property="memNo"/>
	</resultMap>
	
	
	
</mapper>
